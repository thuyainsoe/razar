---
import PlayerTable from "../PlayerTable.astro";
import { playerData } from "../../data/player";

import { getCollection } from "astro:content";
import { CollectionEntry } from "astro:content";
import ReadMoreBtn from "../ReadMoreBtn.astro";
import FontHeading from "../FontHeading.astro";

const allBlogArticles: CollectionEntry<"blog">[] = (
  await getCollection("blog")
).sort(
  (a: CollectionEntry<"blog">, b: CollectionEntry<"blog">) =>
    b.data.publishedDate.valueOf() - a.data.publishedDate.valueOf(),
);

const otherArticles: CollectionEntry<"blog">[] = allBlogArticles.slice(4, 7);
---

<div class="w-full grid grid-cols-4 gap-5 items-start py-8 md:py-[50px]">
  <!-- Left Section -->
  <div class="col-[1/5] lg:col-[1/4] w-full">
    <section id="stats" class="text-text min-h-[50vh] w-full">
      <div class="flex flex-row items-center justify-between w-full mb-4">
        <FontHeading label="Players In Myanmar" />
        <a
          href="/players"
          class="text-text text-xs uppercase py-1 px-2 rounded hover:bg-orange-500 transition-all"
        >
          See More â†’
        </a>
      </div>
      <!-- Scrollable Table Wrapper -->
      <PlayerTable playerData={playerData.slice(0, 10)} />
    </section>
  </div>

  <!-- Right Section (Optional) -->
  <div class="col-[1/5] row-[1/2] lg:col-[4/5] w-full">
    <FontHeading label="Recent Blogs" />
    <div class="flex flex-col gap-5 mt-4">
      {
        otherArticles.map((blog, index) => (
          <div class="bg-gray-800 p-4 rounded-md shadow-md bg-cover bg-center relative">
            <h3 class="text-base sm:text-base mb-2 line-clamp-2">
              {blog.data.title}
            </h3>
            <p class="text-sm  text-gray-400 mb-4 line-clamp-2">
              {blog.data.description}
            </p>
            <ReadMoreBtn href={`/blogs/${blog.slug}`} />
          </div>
        ))
      }
    </div>
  </div>
</div>
