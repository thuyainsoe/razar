---
import Layout from "../layouts/Layout.astro";
import HeroSection from "../components/home/HeroSection.astro";
import HomeSecondSection from "../components/home/HomeSecondSection.astro";
import UpcomingMatch from "../components/home/UpcomingMatch.astro";
import TwoColumnButton from "../components/TwoColumnButton.astro";
import FourRowNewsAndHeader from "../components/FourRowNewsAndHeader.astro";
import { CollectionEntry } from "astro:content";
import { getCollection } from "astro:content";
const sportNews: CollectionEntry<"sport">[] = (
  await getCollection("sport")
).sort(
  (a: CollectionEntry<"sport">, b: CollectionEntry<"sport">) =>
    b.data.publishedDate.valueOf() - a.data.publishedDate.valueOf(),
);

const techBlogs: CollectionEntry<"blog">[] = (await getCollection("blog"))
  .sort(
    (a: CollectionEntry<"blog">, b: CollectionEntry<"blog">) =>
      b.data.publishedDate.valueOf() - a.data.publishedDate.valueOf(),
  )
  .slice(3, 11)
  .map((item) => ({ ...item, slug: `/blogs/${item.slug}` }));

const premierLeagueTopFourNews = sportNews
  .filter((newsItem) => {
    return newsItem.data.tags.includes("Premier League");
  })
  .slice(0, 4)
  .map((item) => ({ ...item, slug: `/sport/news/${item.slug}` }));
---

<Layout>
  <div class="w-full main-container">
    <HeroSection />
    <div class="w-full mb-10">
      <FourRowNewsAndHeader
        label="Tech Blogs"
        articles={techBlogs}
        viewAllLink="/blogs"
      />
    </div>
    <FourRowNewsAndHeader
      label="Premier League"
      articles={premierLeagueTopFourNews}
      viewAllLink="/sport/premier-league"
    />
    <HomeSecondSection />
    <TwoColumnButton />
    <UpcomingMatch />
  </div>
</Layout>
