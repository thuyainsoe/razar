---
import FontHeading from "../../components/FontHeading.astro";
import Layout from "../../layouts/Layout.astro";
---

<Layout>
  <main class="main-container py-8 md:py-12">
    <section class="bg-background text-text">
      <div class="w-full md:w-2/3 mx-auto">
        <FontHeading label="Contact Us" />

        <p class="text-base font-body mb-8 leading-relaxed text-left mt-4">
          We would love to hear from you! If you have any questions, feedback,
          or suggestions, feel free to reach out to us using the form below.
        </p>

        <form
          onsubmit="sendEmail(event)"
          class="bg-primary p-8 rounded-lg shadow-lg"
        >
          <div class="mb-6">
            <label for="name" class="block text-text font-bold mb-2"
              >Your Name</label
            >
            <input
              type="text"
              id="name"
              name="name"
              class="w-full p-4 rounded-md bg-background text-text border focus:outline-none border-none"
              placeholder="Enter your name"
              required
            />
          </div>

          <div class="mb-6">
            <label for="email" class="block text-text font-bold mb-2"
              >Your Email</label
            >
            <input
              type="email"
              id="email"
              name="email"
              class="w-full p-4 rounded-md bg-background text-text border focus:outline-none border-none"
              placeholder="Enter your email"
              required
            />
          </div>

          <div class="mb-6">
            <label for="message" class="block text-text font-bold mb-2"
              >Your Message</label
            >
            <textarea
              id="message"
              name="message"
              rows="5"
              class="w-full p-4 rounded-md bg-background text-text border focus:outline-none border-none"
              placeholder="Enter your message here"
              required></textarea>
          </div>

          <button
            type="submit"
            class="w-fit py-2 px-4 bg-highlight text-text font-bold rounded-md"
          >
            Send Message
          </button>
        </form>
      </div>
    </section>
  </main>
</Layout>

<script is:inline type="module">
  import {
    PUBLIC_EMAILJS_USER_ID,
    PUBLIC_EMAILJS_SERVICE_ID,
    PUBLIC_EMAILJS_TEMPLATE_ID,
  } from "astro:env/client";
  emailjs.init(PUBLIC_EMAILJS_USER_ID);
  function sendEmail(event) {
    event.preventDefault();
    const form = event.target;
    emailjs
      .sendForm(PUBLIC_EMAILJS_SERVICE_ID, PUBLIC_EMAILJS_TEMPLATE_ID, form)
      .then((response) => {
        alert("Message sent successfully!");
        form.reset();
      })
      .catch((error) => {
        alert("Failed to send message. Please try again.");
        console.error("EmailJS Error:", error);
      });
  }
</script>
