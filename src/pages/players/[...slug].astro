---
import { getEntry } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import { calculateAge } from "../../utils";

const { slug } = Astro.params;

if (slug === undefined) {
  throw new Error("Slug is required");
}

const entry = await getEntry("player", slug);

if (entry === undefined) {
  return Astro.redirect("/404");
}

const age = calculateAge(entry.data.born) || "N/A";
---

<Layout>
  <main class="main-container mx-auto p-4 md:p-8">
    <!-- Player Detail Grid -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-[20px]">
      <div class="col-span-1 p-6 rounded-lg shadow-md border border-black/50">
        <!-- Player Image -->
        <img
          src={entry.data.image}
          alt={entry.data.name}
          class="w-full rounded-lg mb-4"
        />

        <!-- Player Information -->
        <div class="text-left">
          <h2 class="text-xl md:text-3xl font-bold mb-2 text-text">
            {entry.data.nickname}
          </h2>

          <ul class="space-y-2">
            <li class="flex justify-between text-sm">
              <span class="font-medium">Age:</span>
              <span>{age}</span>
            </li>
            <li class="flex justify-between text-sm">
              <span class="font-medium">Nationality:</span>
              <span>{entry.data.nationality}</span>
            </li>
            <li class="flex justify-between text-sm">
              <span class="font-medium">Born:</span>
              <span>{entry.data.born}</span>
            </li>
          </ul>
        </div>
      </div>

      <div
        class="col-span-1 md:col-span-3 p-6 rounded-lg shadow-md border border-black/50"
      >
        <!-- Player Bio/Description -->
        <h2 class="text-xl md:text-2xl font-bold mb-4 text-text">
          About Player
        </h2>

        <p class="text-sm md:text-base text-text leading-relaxed mb-6">
          {entry.data.about}
        </p>

        <!-- Player Stats -->
      </div>
    </div>
  </main>
</Layout>
